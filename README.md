# BeerShopPOS - Система автоматизации пивного магазина

Приложение для автоматизации работы пивного магазина, разработанное на платформе .NET Core с использованием Windows Forms.

## Основные возможности

- Управление товарами (добавление, редактирование, удаление)
- Оформление продаж через удобный интерфейс кассира
- Поддержка сканера штрих-кодов
- Интеграция с ЕГАИС
- Работа с фискальным регистратором
- Поддержка различных типов оплаты (наличные, карта)
- Ведение логов операций

## Технические требования

- .NET 8.0 или выше
- Windows OS
- SQLite
- COM-порт для подключения сканера штрих-кодов (опционально)

## Структура проекта

```
BeerShopPOS/
├── DAL/                    # Слой доступа к данным
│   ├── DataContext.cs      # Контекст базы данных
│   └── DesignTimeDbContextFactory.cs
├── Models/                 # Модели данных
│   ├── Product.cs         # Модель товара
│   └── Receipt.cs         # Модель чека
├── Services/              # Бизнес-логика
│   ├── BarcodeScannerService.cs
│   ├── EGAISService.cs
│   ├── FiscalRegisterService.cs
│   ├── PaymentTerminalService.cs
│   ├── PosService.cs
│   └── ProductService.cs
└── UI/                   # Пользовательский интерфейс
    ├── MainForm.cs       # Главная форма приложения
    └── ProductForm.cs    # Форма редактирования товаров
```

## Установка и настройка

1. Клонируйте репозиторий:
```bash
git clone [url-репозитория]
```

2. Восстановите пакеты NuGet:
```bash
dotnet restore
```

3. Примените миграции базы данных:
```bash
dotnet ef database update
```

4. Настройте параметры в файле `appsettings.json`:
```json
{
  "ConnectionStrings": {
    "Default": "Data Source=beershop.db"
  },
  "Scanner": {
    "ComPort": "COM4",
    "BaudRate": 9600
  },
  "Fiscal": {
    "ComPort": "COM1",
    "DriverType": "Atol"
  }
}
```

## Запуск приложения

```bash
dotnet run
```

## Основные операции

### Работа с товарами

- Добавление товара: кнопка "Добавить" в панели товаров
- Редактирование: выберите товар и нажмите "Изменить"
- Удаление: выберите товар и нажмите "Удалить"

### Оформление продажи

1. Отсканируйте товар или выберите его двойным щелчком из списка
2. При необходимости измените количество
3. Выберите тип оплаты (наличные/карта)
4. Нажмите "Оплатить" для закрытия чека

### Удаление позиций из чека

- Выберите позицию в чеке
- Нажмите кнопку "Удалить"

## Особенности реализации

- Использование Entity Framework Core с SQLite
- Асинхронные операции для улучшения отзывчивости интерфейса
- Логирование всех операций
- Поддержка ЕГАИС для алкогольной продукции
- Интеграция с фискальным оборудованием

## Логирование

Логи сохраняются в директории `logs/` в формате:
```
beershopYYYYMMDD.log
```

## Разработка

### Создание новой миграции

```bash
dotnet ef migrations add ИмяМиграции
```

### Обновление базы данных

```bash
dotnet ef database update
```

## Лицензия

[Укажите тип лицензии]

## Поддержка

По вопросам поддержки обращайтесь: [newmastermail@gmail.com]
